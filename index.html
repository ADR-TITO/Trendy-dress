<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trendy Dresses - Fashion Store</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css">
    <style>
        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>
    <link rel="icon" type="image/png"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ‘—</text></svg>"
        id="websiteFavicon">
    <link rel="sitemap" type="application/xml" href="/sitemap.xml">
    <meta name="robots" content="index, follow">
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <i class="fas fa-tshirt"></i>
                <span>Trendy Dresses</span>
            </div>
            <ul class="nav-menu">
                <li><a href="#home" class="nav-link active">Home</a></li>
                <li><a href="#products" class="nav-link">Products</a></li>
                <li><a href="#payment" class="nav-link">Payment</a></li>
                <li><a href="#about" class="nav-link">About</a></li>
                <li><a href="#contact" class="nav-link">Contact</a></li>
            </ul>
            <div class="nav-icons">
                <button class="login-btn" onclick="openLoginModal()" id="loginBtn">
                    <i class="fas fa-user"></i> Login
                </button>
                <button class="admin-btn" onclick="openAdminPanel()" id="adminBtn" style="display: none;">
                    <i class="fas fa-cog"></i> Admin
                </button>
                <div class="cart-icon" onclick="toggleCart()">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count" id="cartCount">0</span>
                </div>
                <div class="menu-toggle" onclick="toggleMobileMenu()">
                    <i class="fas fa-bars"></i>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <h1>Fashion That Speaks Your Style</h1>
            <p>Discover the latest trends in dresses and tracksuits</p>
            <a href="#products" class="btn-primary">Shop Now</a>
        </div>
    </section>

    <!-- Category Filter -->
    <section class="category-filter">
        <div class="container">
            <div class="filter-buttons">
                <button class="filter-btn active" data-category="all">All Products</button>
                <div class="filter-buttons-wrapper">
                    <button class="filter-btn" data-category="dresses">Dresses</button>
                    <button class="filter-btn" data-category="tracksuits">Tracksuits</button>
                    <button class="filter-btn" data-category="khaki-pants-jeans">Khaki Pants & Jeans</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Products Section -->
    <section id="products" class="products-section">
        <div class="container">
            <h2 class="section-title">Our Products</h2>
            <div class="products-grid" id="productsGrid">
                <!-- Products will be dynamically inserted here -->
            </div>
        </div>
    </section>

    <!-- Shopping Cart Sidebar -->
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h2>Shopping Cart</h2>
            <button class="close-cart" onclick="toggleCart()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="cart-items" id="cartItems">
            <p class="empty-cart">Your cart is empty</p>
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <strong>Total: KSh <span id="cartTotal">0</span></strong>
            </div>
            <button class="btn-checkout" onclick="checkout()">Checkout</button>
        </div>
    </div>
    <div class="cart-overlay" id="cartOverlay" onclick="toggleCart()"></div>

    <!-- Cart Added Pop-up Modal -->
    <div class="modal" id="cartAddedModal">
        <div class="modal-content" style="max-width: 400px; text-align: center; padding: 30px;">
            <div style="margin-bottom: 20px;">
                <i class="fas fa-check-circle" style="font-size: 4rem; color: var(--success-color);"></i>
            </div>
            <h2 style="margin-bottom: 15px; color: var(--dark-color);">Item Added to Cart!</h2>
            <div id="cartAddedMessage" style="margin-bottom: 20px; color: #666; font-size: 1.1rem;"></div>
            <div style="display: flex; gap: 10px; justify-content: center; margin-top: 25px;">
                <button class="btn-secondary" onclick="closeCartAddedModal()" style="flex: 1;">
                    Continue Shopping
                </button>
                <button class="btn-primary" onclick="closeCartAddedModal(); toggleCart();" style="flex: 1;">
                    <i class="fas fa-shopping-cart"></i> View Cart
                </button>
            </div>
        </div>
    </div>
    <div class="modal-overlay" id="cartAddedOverlay" onclick="closeCartAddedModal()"></div>

    <!-- Payment Modal -->
    <div class="modal" id="paymentModal">
        <div class="modal-content payment-modal-content">
            <div class="modal-header">
                <h2>Complete Payment</h2>
                <button class="close-modal" onclick="closePaymentModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="order-summary" id="orderSummary">
                    <!-- Order summary will be inserted here -->
                </div>
                <form id="paymentForm" onsubmit="processPayment(event)">
                    <div class="form-group">
                        <label for="deliveryOption">Delivery Option *</label>
                        <div class="delivery-options"
                            style="display: flex; flex-direction: column; gap: 10px; margin-top: 10px;">
                            <label class="delivery-option"
                                style="display: flex; align-items: center; padding: 12px; border: 2px solid #ddd; border-radius: 5px; cursor: pointer; transition: all 0.3s;">
                                <input type="radio" name="deliveryOption" value="pickup" checked
                                    style="margin-right: 10px; cursor: pointer;" onchange="updateDeliveryCost()">
                                <div style="flex: 1;">
                                    <strong>Shop Pickup</strong>
                                    <p style="margin: 5px 0 0 0; color: #666; font-size: 0.9rem;">Collect from our shop
                                    </p>
                                </div>
                                <span style="font-weight: bold; color: var(--primary-color);">KSh 0</span>
                            </label>
                            <label class="delivery-option"
                                style="display: flex; align-items: center; padding: 12px; border: 2px solid #ddd; border-radius: 5px; cursor: pointer; transition: all 0.3s;">
                                <input type="radio" name="deliveryOption" value="nairobi-cbd"
                                    style="margin-right: 10px; cursor: pointer;" onchange="updateDeliveryCost()">
                                <div style="flex: 1;">
                                    <strong>Delivery within Nairobi CBD</strong>
                                    <p style="margin: 5px 0 0 0; color: #666; font-size: 0.9rem;">Delivery to Nairobi
                                        CBD area</p>
                                </div>
                                <span style="font-weight: bold; color: var(--primary-color);">KSh 250</span>
                            </label>
                            <label class="delivery-option"
                                style="display: flex; align-items: center; padding: 12px; border: 2px solid #ddd; border-radius: 5px; cursor: pointer; transition: all 0.3s;">
                                <input type="radio" name="deliveryOption" value="elsewhere"
                                    style="margin-right: 10px; cursor: pointer;" onchange="updateDeliveryCost()">
                                <div style="flex: 1;">
                                    <strong>Delivery Elsewhere (within Kenya)</strong>
                                    <p style="margin: 5px 0 0 0; color: #666; font-size: 0.9rem;">Delivery outside
                                        Nairobi CBD within Kenya</p>
                                </div>
                                <span style="font-weight: bold; color: var(--primary-color);">KSh 300</span>
                            </label>
                        </div>
                        <small style="color: #666; font-size: 0.85rem; display: block; margin-top: 5px;">Select your
                            preferred delivery option</small>
                    </div>
                    <div class="form-group" id="deliveryAddressGroup" style="display: none;">
                        <label for="deliveryAddress">Delivery Address/Details *</label>
                        <textarea id="deliveryAddress" rows="4" placeholder=""
                            style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px; font-size: 1rem; font-family: inherit; resize: vertical;"></textarea>
                        <small id="deliveryAddressHint"
                            style="color: #666; font-size: 0.85rem; display: block; margin-top: 5px;">Please provide
                            detailed delivery address and any special instructions</small>
                    </div>
                    <div class="payment-instructions"
                        style="margin-top: 20px; padding-top: 20px; border-top: 2px solid #eee;">
                        <h3>Payment Method *</h3>
                        <div class="payment-method-selection"
                            style="display: flex; flex-direction: column; gap: 10px; margin-top: 10px;">
                            <label class="payment-option" id="stkPushOption"
                                style="width: 100%; padding: 15px; border: 2px solid #ddd; border-radius: 5px; cursor: pointer; background: #f9f9f9; transition: all 0.3s; display: none;">
                                <input type="radio" name="paymentMethod" value="stk-push" id="paymentMethodStkPush"
                                    style="margin-right: 10px; cursor: pointer;" onchange="updatePaymentMethod()"
                                    onclick="updatePaymentMethod()">
                                <div style="display: flex; align-items: center; gap: 10px;"
                                    onclick="document.getElementById('paymentMethodStkPush').checked = true; updatePaymentMethod();">
                                    <i class="fas fa-mobile-alt"
                                        style="font-size: 1.5rem; color: var(--primary-color);"></i>
                                    <div style="flex: 1;">
                                        <strong style="color: var(--dark-color);">M-Pesa Prompt (STK Push)</strong>
                                        <p style="margin: 5px 0 0 0; color: #666; font-size: 0.9rem;">Enter your phone
                                            number and get payment prompt on your device</p>
                                    </div>
                                </div>
                            </label>
                            <label class="payment-option till-option-green" style="width: 100%;">
                                <input type="radio" name="paymentMethod" value="till" checked style="display: none;"
                                    onchange="updatePaymentMethod()">
                                <div class="payment-option-content">
                                    <i class="fas fa-mobile-alt"></i>
                                    <div>
                                        <strong>M-Pesa Till Number</strong>
                                        <p style="margin: 10px 0;">
                                            <span class="buy-goods-text">Buy Goods</span>
                                            <span class="till-number">177104</span>
                                            <span style="font-size: 0.9rem; color: #666; margin-left: 5px;">(Lucyline
                                                Smart Fashion)</span>
                                        </p>
                                    </div>
                                </div>
                            </label>
                        </div>
                        <div id="tillPaymentSteps" class="payment-steps" style="margin-top: 15px;">
                            <p><strong>Steps to pay:</strong></p>
                            <ol>
                                <li>Go to M-Pesa on your phone</li>
                                <li>Select "Buy Goods and Services"</li>
                                <li>Enter the Till Number: <strong>177104 (Lucyline Smart Fashion)</strong></li>
                                <li>Enter the amount: <strong id="paymentAmount">KSh 0</strong></li>
                                <li>Enter your M-Pesa PIN</li>
                                <li>Complete the transaction</li>
                            </ol>
                        </div>
                        <div id="stkPushPaymentSteps" class="payment-steps" style="margin-top: 15px; display: none;">
                            <p><strong>How it works:</strong></p>
                            <ol>
                                <li><strong>Enter your phone number</strong> below (the number registered with M-Pesa)
                                </li>
                                <li>Click "Complete Payment" button</li>
                                <li>A payment prompt will appear on your phone</li>
                                <li>Enter your M-Pesa PIN to authorize payment</li>
                                <li>Payment will be processed automatically</li>
                            </ol>
                            <p
                                style="margin-top: 10px; padding: 10px; background: #fff3cd; border-left: 4px solid #ffc107; border-radius: 5px; color: #856404; font-size: 0.9rem;">
                                <strong>ðŸ“± Important:</strong> Make sure you enter the correct phone number registered
                                with your M-Pesa account. The payment prompt will be sent to this number.
                            </p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="customerName">Your Name *</label>
                        <input type="text" id="customerName" required placeholder="Enter your full name">
                    </div>
                    <div class="form-group" id="customerPhoneGroup">
                        <label for="customerPhone" id="customerPhoneLabel">Your Phone Number *</label>
                        <input type="tel" id="customerPhone" required placeholder="07XX XXX XXX or 2547XX XXX XXX"
                            pattern="[0-9]{10,12}">
                        <small id="phoneNumberHint"
                            style="color: #666; display: none; font-size: 0.85rem; margin-top: 5px;">Enter the phone
                            number registered with your M-Pesa account (e.g., 0724904692 or 254724904692)</small>
                    </div>
                    <div class="form-group" id="mpesaCodeGroup">
                        <label for="mpesaCode">M-Pesa Transaction Code *</label>
                        <input type="text" id="mpesaCode" required
                            placeholder="Enter 10-character code (e.g., ABC1234XYZ)" pattern="[A-Z0-9]{10}"
                            maxlength="10" style="text-transform: uppercase;"
                            oninput="this.value = this.value.toUpperCase(); validateMpesaCodeInput(this)"
                            onblur="validateMpesaCodeInput(this)">
                        <small id="mpesaCodeError" style="color: #f44336; display: none; margin-top: 5px;"></small>
                        <small style="color: #666; display: block; margin-top: 5px;">Enter the 10-character code from
                            your M-Pesa confirmation message</small>
                    </div>
                    <!-- Payment Progress Display -->
                    <div id="paymentProgress"
                        style="display: none; margin-top: 20px; padding: 15px; background: #f0f7ff; border-radius: 5px; border-left: 4px solid var(--primary-color);">
                        <h4 style="margin: 0 0 10px 0; color: var(--dark-color);">
                            <i class="fas fa-info-circle"></i> Payment Progress
                        </h4>
                        <div style="margin-bottom: 10px;">
                            <strong>Total Amount:</strong> KSh <span id="paymentTotalAmount">0</span>
                        </div>
                        <div style="margin-bottom: 10px;">
                            <strong>Amount Paid:</strong> KSh <span id="paymentPaidAmount"
                                style="color: #4caf50; font-weight: bold;">0</span>
                        </div>
                        <div style="margin-bottom: 10px;">
                            <strong>Remaining Balance:</strong> KSh <span id="paymentRemainingAmount"
                                style="color: #f44336; font-weight: bold;">0</span>
                        </div>
                        <div id="partialPaymentCodes" style="margin-top: 15px;">
                            <!-- Partial payment codes will be listed here -->
                        </div>
                    </div>
                    <!-- Additional M-Pesa Code Inputs Container -->
                    <div id="additionalMpesaCodesContainer" style="margin-top: 20px;">
                        <!-- Additional M-Pesa code inputs will be dynamically added here -->
                    </div>
                    <div class="form-group">
                        <label for="customerEmail">Email (Optional)</label>
                        <input type="email" id="customerEmail" placeholder="your.email@example.com">
                    </div>
                    <button type="submit" class="btn-primary" style="width: 100%; margin-top: 20px;">
                        <i class="fas fa-check"></i> Complete Payment & Generate Receipt
                    </button>
                </form>
            </div>
        </div>
    </div>
    <div class="modal-overlay" id="paymentOverlay" onclick="closePaymentModal()"></div>

    <!-- Payment Verification Loading Modal -->
    <div class="modal" id="paymentVerificationModal" style="display: none; z-index: 3002;">
        <div class="modal-content" style="max-width: 400px; text-align: center; padding: 40px 30px;">
            <div style="margin-bottom: 20px;">
                <div class="spinner"
                    style="border: 4px solid #f3f3f3; border-top: 4px solid var(--primary-color); border-radius: 50%; width: 60px; height: 60px; animation: spin 1s linear infinite; margin: 0 auto;">
                </div>
            </div>
            <h2 style="margin-bottom: 15px; color: var(--dark-color);">Verifying Payment</h2>
            <p style="color: #666; font-size: 1.1rem; margin: 0;">Please wait as we verify your payment...</p>
        </div>
    </div>
    <div class="modal-overlay" id="paymentVerificationOverlay"
        style="display: none; z-index: 3001; background: rgba(0,0,0,0.8);"></div>

    <!-- Receipt Modal -->
    <div class="modal" id="receiptModal">
        <div class="modal-content receipt-modal-content">
            <div class="modal-header">
                <h2>Payment Successful!</h2>
                <button class="close-modal" onclick="closeReceiptModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="success-message">
                    <i class="fas fa-check-circle"
                        style="font-size: 4rem; color: var(--success-color); margin-bottom: 20px;"></i>
                    <h3>Thank you for your purchase!</h3>
                    <p>Your receipt has been generated and will be sent to you via WhatsApp.</p>
                    <p style="color: #4caf50; font-weight: bold; font-size: 1.1rem; margin-top: 15px;">
                        <i class="fas fa-truck"></i> Parcel will be delivered within 24hrs
                    </p>
                </div>
                <div class="receipt-actions">
                    <button class="btn-primary" onclick="downloadReceipt()" style="width: 100%; margin-bottom: 10px;">
                        <i class="fas fa-download"></i> Download Receipt (PDF)
                    </button>
                    <button class="btn-secondary" onclick="sendReceiptViaWhatsApp()"
                        style="width: 100%; background: #25D366; color: white;">
                        <i class="fab fa-whatsapp"></i> Send Receipt via WhatsApp
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-overlay" id="receiptOverlay" onclick="closeReceiptModal()"></div>

    <!-- Login Modal -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Admin Login</h2>
                <button class="close-modal" onclick="closeLoginModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="loginForm" onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label for="username">Username</label>
                        <input type="text" id="username" name="username" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" name="password" required>
                    </div>
                    <button type="submit" class="btn-primary">Login</button>
                </form>
            </div>
        </div>
    </div>
    <div class="modal-overlay" id="modalOverlay" onclick="closeModal()"></div>

    <!-- Delete Confirmation Modal -->
    <div class="modal-overlay" id="deleteConfirmOverlay"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 3000;"
        onclick="cancelDelete()"></div>
    <div class="modal" id="deleteConfirmModal" style="display: none; z-index: 3001; max-width: 500px; width: 90%;">
        <div class="modal-content" style="background: white; border-radius: 10px; padding: 0;">
            <div class="modal-header"
                style="background: #f44336; color: white; border-radius: 10px 10px 0 0; padding: 20px;">
                <h2 style="margin: 0; color: white;">
                    <i class="fas fa-exclamation-triangle"></i> Delete Product?
                </h2>
            </div>
            <div class="modal-body" style="padding: 25px;">
                <p id="deleteConfirmMessage" style="font-size: 1.1rem; margin-bottom: 20px; color: #333;">
                    Are you sure you want to delete this product?
                </p>
                <p style="color: #f44336; font-weight: bold; margin-bottom: 20px;">
                    âš ï¸ This action cannot be undone!
                </p>
                <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 25px;">
                    <button type="button" onclick="cancelDelete()" class="btn-secondary" style="padding: 10px 20px;">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                    <button type="button" onclick="confirmDelete()" class="btn-primary"
                        style="background: #f44336; padding: 10px 20px;">
                        <i class="fas fa-trash"></i> Delete
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Panel -->
    <div class="admin-panel" id="adminPanel">
        <div class="admin-header">
            <h2>Admin Panel</h2>
            <div style="display: flex; gap: 10px; align-items: center;">
                <button class="logout-btn" onclick="logout()"
                    style="background: rgba(255,255,255,0.2); border: 1px solid white; color: white; padding: 5px 15px; border-radius: 5px; cursor: pointer;">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
                <button class="close-admin" onclick="closeAdminPanel()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        <div class="admin-content">
            <div class="admin-tabs">
                <button class="admin-tab active" onclick="switchAdminTab('products')">Products</button>
                <button class="admin-tab" onclick="switchAdminTab('orders')">Orders <span id="ordersBadge" class="badge"
                        style="display: none;">0</span></button>
                <button class="admin-tab" onclick="switchAdminTab('completed')">Completed Orders <span
                        id="completedBadge" class="badge" style="display: none;">0</span></button>
                <button class="admin-tab" onclick="switchAdminTab('content')">Content</button>
                <button class="admin-tab" onclick="switchAdminTab('settings')">Settings</button>
            </div>

            <!-- Orders Tab -->
            <div class="admin-tab-content" id="ordersTab">
                <div
                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 10px;">
                    <h3 style="margin: 0;">Active Orders & Receipts</h3>
                    <div id="adminOrderCount" style="color: var(--primary-color); font-weight: bold; font-size: 1rem;">
                        Total: <span id="adminTotalOrdersCount">0</span> active orders
                    </div>
                </div>
                <div style="display: flex; gap: 10px; margin-bottom: 20px; align-items: center; flex-wrap: wrap;">
                    <div style="flex: 1; min-width: 250px; position: relative;">
                        <i class="fas fa-search"
                            style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #666; z-index: 1;"></i>
                        <input type="text" id="adminOrderSearch"
                            placeholder="Search orders by ID, customer name, phone..."
                            oninput="searchAdminOrders(this.value)" class="admin-search-input">
                    </div>
                    <button class="btn-primary" onclick="loadAdminOrders()" style="padding: 10px 20px;">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                </div>
                <div id="adminOrderSearchResults" style="margin-bottom: 10px; color: #666; font-size: 0.9rem;"></div>
                <div id="adminOrdersList" style="display: flex; flex-direction: column; gap: 15px;">
                    <!-- Orders will be listed here -->
                    <div style="text-align: center; padding: 40px 20px; color: #666;">
                        <i class="fas fa-receipt" style="font-size: 3rem; margin-bottom: 15px; opacity: 0.3;"></i>
                        <p>Loading orders...</p>
                    </div>
                </div>
            </div>

            <!-- Completed Orders Tab -->
            <div class="admin-tab-content" id="completedTab">
                <div
                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 10px;">
                    <h3 style="margin: 0;">Completed Orders</h3>
                    <div id="adminCompletedCount"
                        style="color: var(--success-color); font-weight: bold; font-size: 1rem;">
                        Total: <span id="adminTotalCompletedCount">0</span> completed
                    </div>
                </div>
                <div style="display: flex; gap: 10px; margin-bottom: 20px; align-items: center; flex-wrap: wrap;">
                    <div style="flex: 1; min-width: 250px; position: relative;">
                        <i class="fas fa-search"
                            style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #666; z-index: 1;"></i>
                        <input type="text" id="adminCompletedSearch"
                            placeholder="Search completed orders by ID, customer name, phone..."
                            oninput="searchCompletedOrders(this.value)" class="admin-search-input">
                    </div>
                    <button class="btn-primary" onclick="loadCompletedOrders()" style="padding: 10px 20px;">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                </div>
                <div id="adminCompletedSearchResults" style="margin-bottom: 10px; color: #666; font-size: 0.9rem;">
                </div>
                <div id="adminCompletedList" style="display: flex; flex-direction: column; gap: 15px;">
                    <!-- Completed orders will be listed here -->
                    <div style="text-align: center; padding: 40px 20px; color: #666;">
                        <i class="fas fa-check-circle" style="font-size: 3rem; margin-bottom: 15px; opacity: 0.3;"></i>
                        <p>Loading completed orders...</p>
                    </div>
                </div>
            </div>

            <!-- Products Tab -->
            <div class="admin-tab-content active" id="productsTab">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 10px;">
                    <h3 style="margin: 0;">Manage Products</h3>
                    <div id="adminProductCount" style="color: var(--primary-color); font-weight: bold; font-size: 1rem;">
                        Total: <span id="adminTotalCount">0</span> products
                    </div>
                </div>
                <div style="display: flex; gap: 10px; margin-bottom: 20px; align-items: center; flex-wrap: wrap;">
                    <div style="flex: 1; min-width: 250px; position: relative;">
                        <i class="fas fa-search" style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #666; z-index: 1;"></i>
                        <input type="text" id="adminProductSearch" placeholder="Search products by name, category, size..." oninput="searchAdminProducts(this.value)" class="admin-search-input">
                    </div>
                    <button class="btn-primary" onclick="openAddProductModal()">
                        <i class="fas fa-plus"></i> Add Product
                    </button>
                    <button class="btn-primary" onclick="refreshProducts()" style="padding: 10px 20px;">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                </div>
                <div id="adminSearchResults" style="margin-bottom: 10px; color: #666; font-size: 0.9rem;"></div>
                <div id="adminProductsList" style="display: flex; flex-direction: column; gap: 15px;">
                    <!-- Products will be listed here -->
                    <div style="text-align: center; padding: 40px 20px; color: #666;">
                        <i class="fas fa-box" style="font-size: 3rem; margin-bottom: 15px; opacity: 0.3;"></i>
                        <p>Loading products...</p>
                    </div>
                </div>
            </div>

            <!-- Content Tab -->
            <div class="admin-tab-content" id="contentTab">
                <h3>Edit Website Content</h3>
                <div class="form-group">
                    <label>Hero Title</label>
                    <input type="text" id="heroTitle" value="Fashion That Speaks Your Style">
                </div>
                <div class="form-group">
                    <label>Hero Description</label>
                    <textarea id="heroDescription" rows="3">Discover the latest trends in dresses and tracksuits</textarea>
                </div>
                <div class="form-group">
                    <label>Hero Background Image</label>
                    <div style="margin-bottom: 10px;">
                        <input type="file" id="heroImageFile" accept="image/*" onchange="handleHeroImageUpload(event)" style="margin-bottom: 10px;">
                        <small style="color: #666; font-size: 0.85rem; display: block;">Upload an image file or enter URL below</small>
                    </div>
                    <div style="margin-top: 10px;">
                        <label style="font-size: 0.9rem; color: #666;">Or enter image URL:</label>
                        <input type="url" id="heroImage" placeholder="https://example.com/hero-image.jpg" oninput="previewHeroImage(this.value)" style="margin-top: 5px;">
                    </div>
                    <div id="heroImagePreview" style="margin-top: 10px; display: none;">
                        <label style="font-size: 0.9rem; color: #666;">Preview:</label>
                        <img id="heroPreviewImg" src="" alt="Hero Preview" style="max-width: 100%; max-height: 200px; margin-top: 5px; border-radius: 5px; border: 1px solid #ddd;">
                        <button type="button" onclick="removeHeroImage()" style="margin-top: 10px; padding: 8px 16px; background: #f44336; color: white; border: none; border-radius: 5px; cursor: pointer;">
                            <i class="fas fa-trash"></i> Remove Image
                        </button>
                    </div>
                </div>
                <div class="form-group">
                    <label>About Us Text</label>
                    <textarea id="aboutText" rows="5">Welcome to Trendy Dresses, your one-stop shop for the latest fashion trends. We offer a wide selection of high-quality dresses and tracksuits that combine style, comfort, and affordability. Our mission is to help you express your unique style with confidence.</textarea>
                </div>
                <button class="btn-primary" onclick="saveContent()">Save Content</button>
            </div>
        <!-- Settings Tab -->
        <div class="admin-tab-content" id="settingsTab">
            <h3>Website Settings</h3>

            <!-- Admin Credentials Section -->
            <div class="settings-section"
                style="background: #f9f9f9; padding: 20px; border-radius: 5px; margin-bottom: 20px;">
                <h4 style="margin-bottom: 15px; color: var(--dark-color);">
                    <i class="fas fa-user-shield"></i> Admin Credentials
                </h4>
                <form id="changeCredentialsForm" onsubmit="changeAdminCredentials(event)">
                    <div class="form-group">
                        <label>Current Password *</label>
                        <input type="password" id="currentPassword" required placeholder="Enter current password">
                        <small style="color: #666; font-size: 0.85rem;">Required to verify your
                            identity</small>
                    </div>
                    <div class="form-group">
                        <label>New Username</label>
                        <input type="text" id="newUsername" placeholder="Leave empty to keep current username">
                        <small style="color: #666; font-size: 0.85rem;">Current: <strong
                                id="currentUsernameDisplay">admin</strong></small>
                    </div>
                    <div class="form-group">
                        <label>New Password</label>
                        <input type="password" id="newPassword" placeholder="Leave empty to keep current password">
                        <small style="color: #666; font-size: 0.85rem;">Minimum 6 characters</small>
                    </div>
                    <div class="form-group">
                        <label>Confirm New Password</label>
                        <input type="password" id="confirmNewPassword" placeholder="Re-enter new password">
                    </div>
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> Update Credentials
                    </button>
                </form>
            </div>

            <div class="form-group">
                <label>Website Icon (Favicon)</label>
                <div style="margin-bottom: 10px;">
                    <label for="websiteIconFile" class="file-upload-label" style="width: auto; display: inline-block;">
                        <i class="fas fa-upload"></i> Browse & Upload Icon
                    </label>
                    <input type="file" id="websiteIconFile" accept="image/*" onchange="handleWebsiteIconUpload(event)"
                        style="display: none;">
                    <small style="color: #666; font-size: 0.85rem; display: block; margin-top: 5px;">Upload
                        a square
                        image (recommended: 32x32 or 64x64 pixels)</small>
                </div>
                <div id="websiteIconPreview" style="margin-top: 10px; display: none;">
                    <label style="font-size: 0.9rem; color: #666; font-weight: 500;">Current Icon
                        Preview:</label>
                    <div style="margin-top: 10px; display: flex; align-items: center; gap: 15px;">
                        <img id="websiteIconPreviewImg" src="" alt="Icon Preview"
                            style="width: 64px; height: 64px; border-radius: 5px; border: 1px solid #ddd; object-fit: cover;">
                        <div>
                            <p style="margin: 0; font-size: 0.9rem; color: #666;">This icon appears
                                in browser tabs
                            </p>
                            <button type="button" onclick="removeWebsiteIcon()"
                                style="margin-top: 5px; padding: 5px 15px; background: #f44336; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 0.85rem;">
                                <i class="fas fa-trash"></i> Remove Icon
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label>Contact Phone</label>
                <input type="text" id="contactPhone" value="254724904692">
            </div>
            <div class="form-group">
                <label>Email</label>
                <input type="email" id="contactEmail" value="Trendy dresses790@gmail.com">
            </div>
            <div class="form-group">
                <label>Address</label>
                <input type="text" id="contactAddress"
                    value="Nairobi, Moi avenue, Imenti HSE Glory Exhibition Basement, Shop B4">
            </div>
            <button class="btn-primary" onclick="saveSettings()">Save Settings</button>
        </div>
    </div>
    </div>
    <div class="admin-overlay" id="adminOverlay" onclick="closeAdminPanel()"></div>

    <!-- Add/Edit Product Modal -->
    <div class="modal" id="productModal">
        <div class="modal-content" style="max-height: 90vh; display: flex; flex-direction: column;">
            <div class="modal-header" style="flex-shrink: 0;">
                <h2 id="productModalTitle">Add Product</h2>
                <button class="close-modal" onclick="closeProductModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body"
                style="overflow-y: auto; overflow-x: hidden; flex: 1; max-height: calc(90vh - 80px);">
                <form id="productForm" onsubmit="saveProduct(event)">
                    <input type="hidden" id="productId">
                    <div class="form-group">
                        <label>Product Name</label>
                        <input type="text" id="productName" required>
                    </div>
                    <div class="form-group">
                        <label>Category</label>
                        <select id="productCategory" required>
                            <option value="dresses">Dresses</option>
                            <option value="tracksuits">Tracksuits</option>
                            <option value="others">Others</option>
                            <option value="khaki-pants-jeans">Khaki Pants & Jeans</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Price (KSh)</label>
                        <input type="number" id="productPrice" step="1" required>
                    </div>
                    <div class="form-group">
                        <label>Discount (%)</label>
                        <input type="number" id="productDiscount" min="0" max="100" step="1" value="0" placeholder="0">
                        <small style="color: #666; font-size: 0.85rem;">Enter discount percentage (0-100).
                            Leave as 0
                            for no discount.</small>
                    </div>
                    <div class="form-group">
                        <label>Quantity (Stock)</label>
                        <input type="number" id="productQuantity" min="0" step="1" value="1" required>
                        <small style="color: #666; font-size: 0.85rem;">Enter how many items of this type
                            are available.
                            Set to 0 for sold out.</small>
                    </div>
                    <div class="form-group">
                        <label>Size</label>
                        <select id="productSize" required>
                            <option value="S">S</option>
                            <option value="M">M (38, 10)</option>
                            <option value="L">L (40, 12)</option>
                            <option value="XL">XL (42/44, 14)</option>
                            <option value="2XL">2XL (46, 16)</option>
                            <option value="3XL">3XL (48/50, 18)</option>
                            <option value="4XL">4XL (52/54, 20)</option>
                            <option value="5XL">5XL (54/56, 22)</option>
                            <option value="6XL">6XL (24)</option>
                        </select>
                        <small style="color: #666; font-size: 0.85rem;">Select product size: M=38/10,
                            L=40/12,
                            XL=42/44/14, 2XL=46/16, 3XL=48/50/18, 4XL=52/54/20, 5XL=54/56/22, 6XL=24</small>
                    </div>
                    <div class="form-group">
                        <label>Product Image <span style="color: #f44336;">*</span></label>
                        <div style="margin-bottom: 15px;">
                            <label for="productImageFile" class="file-upload-label">
                                <i class="fas fa-upload"></i> Browse & Upload Image
                            </label>
                            <input type="file" id="productImageFile" accept="image/*"
                                onchange="handleProductImageUpload(event)" style="display: none;">
                            <small style="color: #666; font-size: 0.85rem; display: block; margin-top: 5px;">Click
                                to
                                browse and upload an image file (Max 5MB)</small>
                        </div>
                        <div id="imagePreview" style="margin-top: 15px; display: none;">
                            <label style="font-size: 0.9rem; color: #666; font-weight: 500;">Preview:</label>
                            <div style="margin-top: 10px; position: relative; display: inline-block;">
                                <img id="previewImg" src="" alt="Preview"
                                    style="max-width: 100%; max-height: 200px; border-radius: 5px; border: 1px solid #ddd; display: block;">
                                <button type="button" onclick="removeProductImage()"
                                    style="position: absolute; top: 5px; right: 5px; background: rgba(244, 67, 54, 0.9); color: white; border: none; border-radius: 50%; width: 30px; height: 30px; cursor: pointer; font-size: 0.9rem;">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        <input type="hidden" id="productImage" value="" required>
                    </div>
                    <div
                        style="display: flex; gap: 10px; margin-top: 20px; padding-top: 20px; border-top: 1px solid #eee; flex-shrink: 0;">
                        <button type="submit" class="btn-primary" style="flex: 1;">Upload Item</button>
                        <button type="button" class="btn-secondary" onclick="closeProductModal()"
                            style="flex: 1;">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Image Cropper Modal -->
    <div class="modal-overlay" id="cropperModalOverlay"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 2999;"
        onclick="closeImageCropper()"></div>
    <div class="modal" id="imageCropperModal"
        style="display: none; z-index: 3000; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);">
        <div class="modal-content"
            style="max-width: 90vw; max-height: 90vh; overflow: auto; background: white; border-radius: 10px; padding: 0;">
            <div class="modal-header"
                style="padding: 20px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center;">
                <h2 style="margin: 0;">Crop Image</h2>
                <button class="close-modal" onclick="closeImageCropper()"
                    style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #666;">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" style="padding: 20px;">
                <div style="margin-bottom: 15px;">
                    <p style="color: #666; font-size: 0.9rem; margin-bottom: 10px;">Adjust the crop area to
                        frame your
                        product image. Choose an aspect ratio:</p>
                    <div style="display: flex; gap: 15px; align-items: center; margin-bottom: 10px;">
                        <label
                            style="display: flex; align-items: center; gap: 8px; cursor: pointer; font-size: 0.9rem;">
                            <input type="radio" name="cropRatio" id="ratio43" value="4:3" checked
                                onchange="updateCropRatio(4/3)" style="cursor: pointer;">
                            <span>4:3 (Landscape - Wider)</span>
                        </label>
                        <label
                            style="display: flex; align-items: center; gap: 8px; cursor: pointer; font-size: 0.9rem;">
                            <input type="radio" name="cropRatio" id="ratio34" value="3:4"
                                onchange="updateCropRatio(3/4)" style="cursor: pointer;">
                            <span>3:4 (Portrait - Taller)</span>
                        </label>
                    </div>
                </div>
                <div style="max-width: 100%; margin: 0 auto; position: relative;">
                    <img id="cropperImage" src="" alt="Crop" style="max-width: 100%; display: block; max-height: 70vh;">
                </div>
                <div style="margin-top: 20px; display: flex; gap: 10px; justify-content: flex-end;">
                    <button type="button" class="btn-secondary" onclick="closeImageCropper()">Cancel</button>
                    <button type="button" class="btn-primary" onclick="applyImageCrop()">
                        <i class="fas fa-check"></i> Apply Crop
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- About Section -->
    <section id="about" class="about-section">
        <div class="container">
            <h2 class="section-title">About Us</h2>
            <p class="about-text">
                Welcome to Trendy Dresses, your one-stop shop for the latest fashion trends.
                We offer a wide selection of high-quality dresses and tracksuits
                that combine style, comfort, and affordability. Our mission is to help you express
                your unique style with confidence.
            </p>
        </div>
    </section>

    <!-- Payment Section -->
    <section id="payment" class="payment-section">
        <div class="container">
            <h2 class="section-title">Payment Methods</h2>
            <div class="payment-info">
                <div class="payment-card till-card-green" style="width: 100%; max-width: 400px; margin: 0 auto;">
                    <i class="fas fa-mobile-alt"></i>
                    <h3>M-Pesa Till Number</h3>
                    <p class="payment-number">
                        <span class="buy-goods-text">Buy Goods</span>
                        <span class="till-number">177104</span>
                        <span style="font-size: 0.9rem; color: #666; display: block; margin-top: 5px;">(Lucyline
                            Smart
                            Fashion)</span>
                    </p>
                    <p class="payment-desc">Use this till number for quick payments</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="contact-section">
        <div class="container">
            <h2 class="section-title">Contact Us</h2>
            <div class="contact-info">
                <div class="contact-item">
                    <i class="fab fa-whatsapp"></i>
                    <p>
                        <a href="https://wa.me/254724904692" target="_blank" class="whatsapp-link">
                            +254 724 904 692
                        </a>
                    </p>
                    <small>Click to chat on WhatsApp</small>
                </div>
                <div class="contact-item">
                    <i class="fas fa-phone"></i>
                    <p id="contactPhoneDisplay">
                        <a href="tel:+254724904692" class="contact-link">+254 724 904 692</a>
                    </p>
                    <small>Click to call</small>
                </div>
                <div class="contact-item">
                    <i class="fas fa-envelope"></i>
                    <p id="contactEmailDisplay">
                        <a href="mailto:Trendy dresses790@gmail.com" class="contact-link">Trendy
                            dresses790@gmail.com</a>
                    </p>
                    <small>Click to send email</small>
                </div>
                <div class="contact-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <p id="contactAddressDisplay">
                        <a href="https://www.google.com/maps/search/?api=1&query=Nairobi+Moi+avenue+Imenti+HSE+Glory+Exhibition+Basement+Shop+B4"
                            target="_blank" class="contact-link">Nairobi, Moi avenue, Imenti HSE Glory
                            Exhibition
                            Basement, Shop B4</a>
                    </p>
                    <small>Click to view on Google Maps</small>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Trendy Dresses. All rights reserved.</p>
            <div class="social-links">
                <a href="https://wa.me/254724904692" target="_blank" class="whatsapp-link">
                    <i class="fab fa-whatsapp"></i>
                </a>
            </div>
            <div class="form-group">
                <label>Discount (%)</label>
                <input type="number" id="productDiscount" min="0" max="100" step="1" value="0" placeholder="0">
                <small style="color: #666; font-size: 0.85rem;">Enter discount percentage (0-100). Leave as
                    0
                    for no discount.</small>
            </div>
            <div class="form-group">
                <label>Quantity (Stock)</label>
                <input type="number" id="productQuantity" min="0" step="1" value="1" required>
                <small style="color: #666; font-size: 0.85rem;">Enter how many items of this type are
                    available.
                    Set to 0 for sold out.</small>
            </div>
            <div class="form-group">
                <label>Size</label>
                <select id="productSize" required>
                    <option value="S">S</option>
                    <option value="M">M (38, 10)</option>
                    <option value="L">L (40, 12)</option>
                    <option value="XL">XL (42/44, 14)</option>
                    <option value="2XL">2XL (46, 16)</option>
                    <option value="3XL">3XL (48/50, 18)</option>
                    <option value="4XL">4XL (52/54, 20)</option>
                    <option value="5XL">5XL (54/56, 22)</option>
                    <option value="6XL">6XL (24)</option>
                </select>
                <small style="color: #666; font-size: 0.85rem;">Select product size: M=38/10, L=40/12,
                    XL=42/44/14, 2XL=46/16, 3XL=48/50/18, 4XL=52/54/20, 5XL=54/56/22, 6XL=24</small>
            </div>
            <div class="form-group">
                <label>Product Image <span style="color: #f44336;">*</span></label>
                <div style="margin-bottom: 15px;">
                    <label for="productImageFile" class="file-upload-label">
                        <i class="fas fa-upload"></i> Browse & Upload Image
                    </label>
                    <input type="file" id="productImageFile" accept="image/*" onchange="handleProductImageUpload(event)"
                        style="display: none;">
                    <small style="color: #666; font-size: 0.85rem; display: block; margin-top: 5px;">Click
                        to
                        browse and upload an image file (Max 5MB)</small>
                </div>
                <div id="imagePreview" style="margin-top: 15px; display: none;">
                    <label style="font-size: 0.9rem; color: #666; font-weight: 500;">Preview:</label>
                    <div style="margin-top: 10px; position: relative; display: inline-block;">
                        <img id="previewImg" src="" alt="Preview"
                            style="max-width: 100%; max-height: 200px; border-radius: 5px; border: 1px solid #ddd; display: block;">
                        <button type="button" onclick="removeProductImage()"
                            style="position: absolute; top: 5px; right: 5px; background: rgba(244, 67, 54, 0.9); color: white; border: none; border-radius: 50%; width: 30px; height: 30px; cursor: pointer; font-size: 0.9rem;">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                <input type="hidden" id="productImage" value="" required>
            </div>
            <div
                style="display: flex; gap: 10px; margin-top: 20px; padding-top: 20px; border-top: 1px solid #eee; flex-shrink: 0;">
                <button type="submit" class="btn-primary" style="flex: 1;">Upload Item</button>
                <button type="button" class="btn-secondary" onclick="closeProductModal()"
                    style="flex: 1;">Cancel</button>
            </div>
            </form>
        </div>
        </div>
        </div>

        <!-- Image Cropper Modal -->
        <div class="modal-overlay" id="cropperModalOverlay"
            style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 2999;"
            onclick="closeImageCropper()"></div>
        <div class="modal" id="imageCropperModal"
            style="display: none; z-index: 3000; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);">
            <div class="modal-content"
                style="max-width: 90vw; max-height: 90vh; overflow: auto; background: white; border-radius: 10px; padding: 0;">
                <div class="modal-header"
                    style="padding: 20px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center;">
                    <h2 style="margin: 0;">Crop Image</h2>
                    <button class="close-modal" onclick="closeImageCropper()"
                        style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #666;">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body" style="padding: 20px;">
                    <div style="margin-bottom: 15px;">
                        <p style="color: #666; font-size: 0.9rem; margin-bottom: 10px;">Adjust the crop area to frame
                            your
                            product image. Choose an aspect ratio:</p>
                        <div style="display: flex; gap: 15px; align-items: center; margin-bottom: 10px;">
                            <label
                                style="display: flex; align-items: center; gap: 8px; cursor: pointer; font-size: 0.9rem;">
                                <input type="radio" name="cropRatio" id="ratio43" value="4:3" checked
                                    onchange="updateCropRatio(4/3)" style="cursor: pointer;">
                                <span>4:3 (Landscape - Wider)</span>
                            </label>
                            <label
                                style="display: flex; align-items: center; gap: 8px; cursor: pointer; font-size: 0.9rem;">
                                <input type="radio" name="cropRatio" id="ratio34" value="3:4"
                                    onchange="updateCropRatio(3/4)" style="cursor: pointer;">
                                <span>3:4 (Portrait - Taller)</span>
                            </label>
                        </div>
                    </div>
                    <div style="max-width: 100%; margin: 0 auto; position: relative;">
                        <img id="cropperImage" src="" alt="Crop"
                            style="max-width: 100%; display: block; max-height: 70vh;">
                        <button type="button" class="btn-secondary" onclick="closeImageCropper()">Cancel</button>
                        <button type="button" class="btn-primary" onclick="applyImageCrop()">
                            <i class="fas fa-check"></i> Apply Crop
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- About Section -->
        <section id="about" class="about-section">
            <div class="container">
                <h2 class="section-title">About Us</h2>
                <p class="about-text">
                    Welcome to Trendy Dresses, your one-stop shop for the latest fashion trends.
                    We offer a wide selection of high-quality dresses and tracksuits
                    that combine style, comfort, and affordability. Our mission is to help you express
                    your unique style with confidence.
                </p>
            </div>
        </section>

        <!-- Payment Section -->
        <section id="payment" class="payment-section">
            <div class="container">
                <h2 class="section-title">Payment Methods</h2>
                <div class="payment-info">
                    <div class="payment-card till-card-green" style="width: 100%; max-width: 400px; margin: 0 auto;">
                        <i class="fas fa-mobile-alt"></i>
                        <h3>M-Pesa Till Number</h3>
                        <p class="payment-number">
                            <span class="buy-goods-text">Buy Goods</span>
                            <span class="till-number">177104</span>
                            <span style="font-size: 0.9rem; color: #666; display: block; margin-top: 5px;">(Lucyline
                                Smart
                                Fashion)</span>
                        </p>
                        <p class="payment-desc">Use this till number for quick payments</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="contact-section">
            <div class="container">
                <h2 class="section-title">Contact Us</h2>
                <div class="contact-info">
                    <div class="contact-item">
                        <i class="fab fa-whatsapp"></i>
                        <p>
                            <a href="https://wa.me/254724904692" target="_blank" class="whatsapp-link">
                                +254 724 904 692
                            </a>
                        </p>
                        <small>Click to chat on WhatsApp</small>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-phone"></i>
                        <p id="contactPhoneDisplay">
                            <a href="tel:+254724904692" class="contact-link">+254 724 904 692</a>
                        </p>
                        <small>Click to call</small>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <p id="contactEmailDisplay">
                            <a href="mailto:Trendy dresses790@gmail.com" class="contact-link">Trendy
                                dresses790@gmail.com</a>
                        </p>
                        <small>Click to send email</small>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <p id="contactAddressDisplay">
                            <a href="https://www.google.com/maps/search/?api=1&query=Nairobi+Moi+avenue+Imenti+HSE+Glory+Exhibition+Basement+Shop+B4"
                                target="_blank" class="contact-link">Nairobi, Moi avenue, Imenti HSE Glory Exhibition
                                Basement, Shop B4</a>
                        </p>
                        <small>Click to view on Google Maps</small>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <div class="container">
                <p>&copy; 2024 Trendy Dresses. All rights reserved.</p>
                <div class="social-links">
                    <a href="https://wa.me/254724904692" target="_blank" class="whatsapp-link">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                </div>
                <div class="form-group">
                    <label>Discount (%)</label>
                    <input type="number" id="productDiscount" min="0" max="100" step="1" value="0" placeholder="0">
                    <small style="color: #666; font-size: 0.85rem;">Enter discount percentage (0-100). Leave as 0
                        for no discount.</small>
                </div>
                <div class="form-group">
                    <label>Quantity (Stock)</label>
                    <input type="number" id="productQuantity" min="0" step="1" value="1" required>
                    <small style="color: #666; font-size: 0.85rem;">Enter how many items of this type are available.
                        Set to 0 for sold out.</small>
                </div>
                <div class="form-group">
                    <label>Size</label>
                    <select id="productSize" required>
                        <option value="S">S</option>
                        <option value="M">M (38, 10)</option>
                        <option value="L">L (40, 12)</option>
                        <option value="XL">XL (42/44, 14)</option>
                        <option value="2XL">2XL (46, 16)</option>
                        <option value="3XL">3XL (48/50, 18)</option>
                        <option value="4XL">4XL (52/54, 20)</option>
                        <option value="5XL">5XL (54/56, 22)</option>
                        <option value="6XL">6XL (24)</option>
                    </select>
                    <small style="color: #666; font-size: 0.85rem;">Select product size: M=38/10, L=40/12,
                        XL=42/44/14, 2XL=46/16, 3XL=48/50/18, 4XL=52/54/20, 5XL=54/56/22, 6XL=24</small>
                </div>
                <div class="form-group">
                    <label>Product Image <span style="color: #f44336;">*</span></label>
                    <div style="margin-bottom: 15px;">
                        <label for="productImageFile" class="file-upload-label">
                            <i class="fas fa-upload"></i> Browse & Upload Image
                        </label>
                        <input type="file" id="productImageFile" accept="image/*"
                            onchange="handleProductImageUpload(event)" style="display: none;">
                        <small style="color: #666; font-size: 0.85rem; display: block; margin-top: 5px;">Click to
                            browse and upload an image file (Max 5MB)</small>
                    </div>
                    <div id="imagePreview" style="margin-top: 15px; display: none;">
                        <label style="font-size: 0.9rem; color: #666; font-weight: 500;">Preview:</label>
                        <div style="margin-top: 10px; position: relative; display: inline-block;">
                            <img id="previewImg" src="" alt="Preview"
                                style="max-width: 100%; max-height: 200px; border-radius: 5px; border: 1px solid #ddd; display: block;">
                            <button type="button" onclick="removeProductImage()"
                                style="position: absolute; top: 5px; right: 5px; background: rgba(244, 67, 54, 0.9); color: white; border: none; border-radius: 50%; width: 30px; height: 30px; cursor: pointer; font-size: 0.9rem;">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                    <input type="hidden" id="productImage" value="" required>
                </div>
                <div
                    style="display: flex; gap: 10px; margin-top: 20px; padding-top: 20px; border-top: 1px solid #eee; flex-shrink: 0;">
                    <button type="submit" class="btn-primary" style="flex: 1;">Upload Item</button>
                    <button type="button" class="btn-secondary" onclick="closeProductModal()"
                        style="flex: 1;">Cancel</button>
                </div>
                </form>
            </div>
            </div>
            </div>

            <!-- Image Cropper Modal -->
            <div class="modal-overlay" id="cropperModalOverlay"
                style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 2999;"
                onclick="closeImageCropper()"></div>
            <div class="modal" id="imageCropperModal"
                style="display: none; z-index: 3000; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);">
                <div class="modal-content"
                    style="max-width: 90vw; max-height: 90vh; overflow: auto; background: white; border-radius: 10px; padding: 0;">
                    <div class="modal-header"
                        style="padding: 20px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center;">
                        <h2 style="margin: 0;">Crop Image</h2>
                        <button class="close-modal" onclick="closeImageCropper()"
                            style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #666;">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body" style="padding: 20px;">
                        <div style="margin-bottom: 15px;">
                            <p style="color: #666; font-size: 0.9rem; margin-bottom: 10px;">Adjust the crop area to
                                frame
                                your
                                product image. Choose an aspect ratio:</p>
                            <div style="display: flex; gap: 15px; align-items: center; margin-bottom: 10px;">
                                <label
                                    style="display: flex; align-items: center; gap: 8px; cursor: pointer; font-size: 0.9rem;">
                                    <input type="radio" name="cropRatio" id="ratio43" value="4:3" checked
                                        onchange="updateCropRatio(4/3)" style="cursor: pointer;">
                                    <span>4:3 (Landscape - Wider)</span>
                                </label>
                                <label
                                    style="display: flex; align-items: center; gap: 8px; cursor: pointer; font-size: 0.9rem;">
                                    <input type="radio" name="cropRatio" id="ratio34" value="3:4"
                                        onchange="updateCropRatio(3/4)" style="cursor: pointer;">
                                    <span>3:4 (Portrait - Taller)</span>
                                </label>
                            </div>
                        </div>
                        <div style="max-width: 100%; margin: 0 auto; position: relative;">
                            <img id="cropperImage" src="" alt="Crop"
                                style="max-width: 100%; display: block; max-height: 70vh;">
                        </div>
                        <div style="margin-top: 20px; display: flex; gap: 10px; justify-content: flex-end;">
                            <button type="button" class="btn-secondary" onclick="closeImageCropper()">Cancel</button>
                            <button type="button" class="btn-primary" onclick="applyImageCrop()">
                                <i class="fas fa-check"></i> Apply Crop
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            </div>

            <script src="storage-manager.js?v=1.1"></script>
            <script src="api-service.js?v=1.1"></script>
            <script src="script.js?v=1.2"></script>
</body>

</html>
