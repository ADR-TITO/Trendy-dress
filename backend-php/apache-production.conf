# Apache Virtual Host Configuration for Production
# Location: /etc/apache2/sites-available/trendydresses.co.ke.conf

<VirtualHost *:80>
    ServerName trendydresses.co.ke
    ServerAlias www.trendydresses.co.ke
    DocumentRoot /var/www/trendydresses.co.ke
    
    # API Routes - PHP Backend
    Alias /api /var/www/trendydresses.co.ke/backend-php
    <Directory /var/www/trendydresses.co.ke/backend-php>
        AllowOverride All
        Require all granted
        DirectoryIndex index.php
        Options -Indexes +FollowSymLinks
    </Directory>
    
    # Frontend
    <Directory /var/www/trendydresses.co.ke>
        AllowOverride All
        Require all granted
        Options -Indexes +FollowSymLinks
    </Directory>
    
    # Logging
    ErrorLog ${APACHE_LOG_DIR}/trendydresses-error.log
    CustomLog ${APACHE_LOG_DIR}/trendydresses-access.log combined
    
    # Security
    ServerTokens Prod
    ServerSignature Off
</VirtualHost>

# HTTPS Configuration (if SSL is configured)
<VirtualHost *:443>
    ServerName trendydresses.co.ke
    ServerAlias www.trendydresses.co.ke
    DocumentRoot /var/www/trendydresses.co.ke
    
    # SSL Configuration
    # SSLEngine on
    # SSLCertificateFile /path/to/certificate.crt
    # SSLCertificateKeyFile /path/to/private.key
    
    # API Routes - PHP Backend
    Alias /api /var/www/trendydresses.co.ke/backend-php
    <Directory /var/www/trendydresses.co.ke/backend-php>
        AllowOverride All
        Require all granted
        DirectoryIndex index.php
        Options -Indexes +FollowSymLinks
    </Directory>
    
    # Frontend
    <Directory /var/www/trendydresses.co.ke>
        AllowOverride All
        Require all granted
        Options -Indexes +FollowSymLinks
    </Directory>
    
    # Logging
    ErrorLog ${APACHE_LOG_DIR}/trendydresses-ssl-error.log
    CustomLog ${APACHE_LOG_DIR}/trendydresses-ssl-access.log combined
</VirtualHost>

